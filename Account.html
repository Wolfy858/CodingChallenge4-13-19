<html>
  <head>
    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="assets/stylesheets/site.css"></link>
    <script src="assets/javascripts/application.js"></script>
    <script>
      function loginPage(){
        document.getElementById("accountLoggedOut").classList.add("hidden");
        document.getElementById("accountLoggedIn").classList.remove("hidden");
        fetchAccountDetails();
      }
      function logoutPage() {
        document.getElementById("accountLoggedOut").classList.remove("hidden");
        document.getElementById("accountLoggedIn").classList.add("hidden");
      }
      function fetchAccountDetails() {
        var id = getCookie("id");
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'https://jsonplaceholder.typicode.com/users/' + id);
        xhr.onload = function() {
            if (xhr.status === 200) {
              var details = JSON.parse(xhr.responseText)
              document.getElementById("name").innerHTML = details.name;
              document.getElementById("username").value = details.username;
              document.getElementById("street").innerHTML = details.address.street;
              document.getElementById("suite").innerHTML = details.address.suite;
              document.getElementById("city").innerHTML = details.address.city;
              document.getElementById("zip").innerHTML = details.address.zipcode;
              document.getElementById("phone").innerHTML = details.phone;
              document.getElementById("website").innerHTML = details.website;
              document.getElementById("company").innerHTML = details.company.name;
            }
            else {
                alert('Request failed.  Returned status of ' + xhr.status);
            }
        };
        xhr.send()
      }
    </script>

  </head>
  <body>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
      <h4 class="navbar-brand">Navbar</h4>
      <div>
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/Account.html">Account</a>
          </li>
          <li id="login" class="nav-item">
            <a href='/Login.html' class="nav-link">Login</a>
          </li>
          <li id="logout" class="nav-item hidden">
            <button type="button" class="btn btn-link" onclick="logout();">Logout</button>
          </li>
        </ul>
      </div>
    </nav>
    <main>
      <div id="accountLoggedOut" class="container">
        <div class="alert alert-danger margin-t-30" role="alert">
          Please login to access your account page.
        </div>
      </div>
      <div id="accountLoggedIn" class="container hidden">
        <h3>Welcome, <span id="name"></span></h3>
        <p>Please review your information</p>
        <form>
          <div class="form-group row">
            <label for="username" class="col-sm-2 col-form-label">Username</label>
            <div class="col-sm-10">
              <input type="text" readonly class="form-control-plaintext" id="username">
            </div>
          </div>
        </form>



        <details>
          <summary>Address</summary>
          <p><span id="street"></span></p>
          <p><span id="suite"></span></p>
          <p><span id="city"></span></p>
          <p><span id="zip"></span></p>
        </details>
        <p>Phone: <span id="phone"></span></p>
        <p>Website: <span id="website"></span></p>
        <p>Company: <span id="company"></span></p>
      </div>
    </main>
  </body>
</html>
